(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+fAT":function(t,e,n){var a={"./components/ExampleComponent.vue":"AEaB","./components/MapComponent.vue":"rlHA","./components/Rss.vue":"9oGP"};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}o.keys=function(){return Object.keys(a)},o.resolve=r,t.exports=o,o.id="+fAT"},0:function(t,e,n){n("bUC5"),t.exports=n("pyCd")},"9Wh1":function(t,e,n){window._=n("LvDl");try{window.Popper=n("8L3F").default,window.$=window.jQuery=n("EVdn"),n("SYky")}catch(t){}window.axios=n("vDqi"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var a=document.head.querySelector('meta[name="csrf-token"]');a?window.axios.defaults.headers.common["X-CSRF-TOKEN"]=a.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token")},"9oGP":function(t,e,n){"use strict";n.r(e);var a={props:["title","date","source","link"]},o=n("KHd+"),r=Object(o.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"small"},[n("p",[t.title?n("a",{attrs:{target:"_BLANK",href:t.link}},[t._v(t._s(t.title)+" ")]):t._e(),t._v(" "),t.date?n("small",[t._v(" "+t._s(t.date)+"\n            "),t.source?n("span",{staticClass:"text-muted"},[t._v(" "+t._s(t.source)+" ")]):t._e()]):t._e()])])}),[],!1,null,null,null);e.default=r.exports},AEaB:function(t,e,n){"use strict";n.r(e);var a={mounted:function(){console.log("Component mounted.")}},o=n("KHd+"),r=Object(o.a)(a,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-8"},[e("div",{staticClass:"card card-default"},[e("div",{staticClass:"card-header"},[this._v("Example Component")]),this._v(" "),e("div",{staticClass:"card-body"},[this._v("\n                    I'm an example component.\n                ")])])])])])}],!1,null,null,null);e.default=r.exports},GQVP:function(t,e,n){(e=t.exports=n("I1BE")(!1)).i(n("hhfp"),""),e.i(n("bKdT"),""),e.push([t.i,"\n",""])},QOjm:function(t,e,n){"use strict";var a=n("vuXJ");n.n(a).a},bUC5:function(t,e,n){"use strict";n.r(e);var a=n("4R65");n("9Wh1"),window.timeago=n("xyvv"),window.Vue=n("XuX8"),delete a.Icon.Default.prototype._getIconUrl,a.Icon.Default.mergeOptions({iconRetinaUrl:n("WE1v"),iconUrl:n("Y5fm"),shadowUrl:n("4rkx")});var o=n("+fAT");o.keys().map((function(t){return Vue.component(t.split("/").pop().split(".")[0],o(t).default)}));new Vue({el:"#app"})},pyCd:function(t,e){},rlHA:function(t,e,n){"use strict";n.r(e);var a=n("JpmB"),o=n("pArE"),r=n("Tith"),s=n("9g/y"),i=n("+7pQ"),c=n("Hrto"),l=n("L2ck"),u=n("yp/A"),p=n.n(u),d={components:{LMap:a.a,LTileLayer:o.a,LMarker:r.a,LPopup:s.a,"l-locatecontrol":l.a,LIcon:i.a,"l-marker-cluster":p.a,LLayerGroup:c.a},data:function(){return{zoom:13,center:L.latLng(43.704,7.3111),url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:19,minZoom:2,incidents:[],categories:[],submit_data:{lat:0,lng:0,category:1,loading:!1}}},mounted:function(){var t=this;axios.get("/api/incidents").then((function(e){return t.incidents=e.data})),axios.get("/api/categories").then((function(e){return t.categories=e.data.data}))},methods:{addMarker:function(t){console.log(t),this.$refs.hello_popup.mapObject.openPopup(t.latlng),this.submit_data.lat=t.latlng.lat,this.submit_data.lng=t.latlng.lng,this.$refs.map.mapObject.flyTo(t.latlng,18),console.log(this.submit_data)},openPopup:function(t){timeago.render(document.querySelectorAll(".timestamp"))},submitForm:function(t){var e=this;this.submit_data.loading=!0,axios.post("/api/incidents",this.submit_data).then((function(t){console.log(t.data),e.incidents.push(t.data),e.$refs.hello_popup.mapObject.closePopup(),e.submit_data.loading=!1})).catch((function(t){console.log(t),alert("You must be logged in and have permssion to post. Please log in or register."),e.submit_data.loading=!1}))}}},m=(n("QOjm"),n("KHd+")),f=Object(m.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("l-map",{ref:"map",staticStyle:{width:"100%",height:"71vh"},attrs:{zoom:t.zoom,center:t.center},on:{contextmenu:t.addMarker}},[n("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._v(" "),n("l-locatecontrol"),t._v(" "),n("l-layer-group",{ref:"hello_popup"},[n("l-popup",{staticStyle:{height:"100px"}},[n("form",{attrs:{method:"POST",id:"reportForm",action:"/incidents"},on:{submit:function(e){return e.preventDefault(),t.submitForm()}}},[n("label",{staticClass:"my-1 mr-2"},[t._v("Report incident:")]),t._v(" "),n("select",{staticClass:"custom-select my-1 mr-sm-2 custom-select-sm",attrs:{name:"category"},on:{change:function(e){t.submit_data.category=e.target.value}}},t._l(t.categories,(function(e){return n("option",{domProps:{value:e.id}},[n("img",{attrs:{src:e.icon,width:"20"}}),t._v(t._s(e.name))])})),0),t._v(" "),n("br"),t._v(" "),n("input",{staticClass:"btn btn-primary btn-sm my-1",attrs:{type:"submit",value:"Report",disabled:t.submit_data.loading}})])])],1),t._v(" "),n("l-marker-cluster",t._l(t.incidents,(function(e){return n("l-marker",{key:e.id+"marker",attrs:{"lat-lng":[e.x,e.y]}},[n("l-icon",{attrs:{"icon-url":e.category.icon,"icon-size":[20,20],"icon-anchor":[10,10]}}),t._v(" "),n("l-popup",{on:{ready:t.openPopup}},[n("b",[t._v(t._s(e.category.name)+" reported in the area.")]),n("br"),t._v("Last report: "),n("span",{staticClass:"timestamp",attrs:{datetime:e.updated_at}},[t._v(t._s(e.updated_at))]),t._v("."),n("br")])],1)})),1)],1)],1)}),[],!1,null,"472b1f46",null);e.default=f.exports},vuXJ:function(t,e,n){var a=n("GQVP");"string"==typeof a&&(a=[[t.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,o);a.locals&&(t.exports=a.locals)}},[[0,1,2]]]);
//# sourceMappingURL=app.js.map